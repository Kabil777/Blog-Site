generator client {
        provider = "prisma-client-js"
}

datasource db {
        provider = "mysql"
        url      = env("DATABASE_URL")
}

model User {
        id           String   @id @default(uuid())
        Google_id    String   @unique
        name         String   @unique
        email        String   @unique
        profileCover String
        createdAt    DateTime @default(now())
        posts        Post[]   @relation("post")
}

model Post {
        id          String      @id @unique
        slug        String      @unique
        name        String
        description String      @db.LongText
        mdFileName  String
        userId      String
        createdAt   DateTime    @default(now())
        user        User        @relation("post", fields: [userId], references: [id])
        tags        TagMapper[]
        likes       Int

        @@index([userId], map: "Post_userId_fkey")
}

model Tags {
        id        Int         @id @default(autoincrement())
        domain    String
        skill     String      @unique
        createdAt DateTime    @default(now())
        post      TagMapper[]
}

model TagMapper {
        id     Int    @id @default(autoincrement())
        postId String
        tagId  Int
        post   Post   @relation(fields: [postId], references: [id])
        tag    Tags   @relation(fields: [tagId], references: [id])

        @@index([postId], map: "TagMapper_postId_fkey")
        @@index([tagId], map: "TagMapper_tagId_fkey")
}
